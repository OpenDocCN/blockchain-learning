# ä¸ƒã€.7 å®æ—¶å¸ä»·åŠŸèƒ½è®¾è®¡ä¸å®ç°

æœ¬å°èŠ‚å°†ä¸»è¦ä»‹ç»å¦‚ä½•å®ç°å½“å‰äº¤æ˜“æ‰€æ‰€æœ‰äº¤æ˜“å¯¹å¸ä»·çš„ http æ•°æ®æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼šå½“å‰ä»·æ ¼ã€æœ€é«˜ä»·ã€æœ€ä½ä»·ä»¥åŠ 24 å°æ—¶æˆäº¤é‡ç­‰ä¿¡æ¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å®ç°å¯¹äº¤æ˜“æ‰€å±•ç¤ºé¡µé¢å®æ—¶å¸ä»·çš„æ¶ˆæ¯æ¨é€ã€‚

* * *

## åŠŸèƒ½ä»‹ç»

å®æ—¶å¸ä»·åŠŸèƒ½, ä¸»è¦ç”¨äºå±•ç¤ºäº¤æ˜“æ‰€æ‰€æœ‰äº¤æ˜“å¯¹å½“å‰çš„å¸‚åœºè¡Œæƒ…ï¼Œå¹¶æ ¹æ®å¸‚åœºäº¤æ˜“æˆäº¤è®°å½•å®æ—¶æ›´æ–°å‰ç«¯é¡µé¢ä¸­çš„äº¤æ˜“å¯¹ä»·æ ¼åŠæˆäº¤é‡ç­‰ä¿¡æ¯ã€‚

## æ¥å£æœåŠ¡

### æŸ¥è¯¢äº¤æ˜“å¯¹ä»·æ ¼

æŸ¥è¯¢å½“å‰æ—¶é—´æ‰€æœ‰äº¤æ˜“å¯¹çš„å¸ä»·ã€æ¶¨è·Œå¹…ã€æˆäº¤é‡ç­‰ä¿¡æ¯ã€‚

**è§¦å‘æ¡ä»¶** é¡µé¢é¦–æ¬¡åŠ è½½æ—¶ï¼ŒåŠ è½½æ‰€æœ‰äº¤æ˜“å¯¹ä»·æ ¼ä¿¡æ¯ã€‚

**æ•°æ®æ¥å£**

*   **æ¥å£åœ°å€:** `/api/price/query`
*   **è¯·æ±‚å‚æ•°**
    æ— 
*   **æäº¤æ–¹å¼ï¼š** `get`
*   **å“åº”ç»“æœï¼š**

    ```js
    {
        "result": "ok",
        "data": [
            [1, 0.0049, -0.0585, 4371833.4722, 0.005445, 0.004669], //äº¤æ˜“å¯¹ idã€ä»·æ ¼ã€æ¶¨å¹…ç™¾åˆ†æ¯”ã€æˆäº¤é‡(24H)ã€é«˜(24H)ã€ä½(24H)
            [... ...]
        ]
    }
    ```

### æ¨é€äº¤æ˜“å¯¹å®æ—¶ä»·æ ¼

å®æ—¶æ¨é€å˜åŒ–äº¤æ˜“å¯¹çš„å¸ä»·ã€æ¶¨è·Œå¹…ã€æˆäº¤é‡ç­‰ä¿¡æ¯ã€‚

**è§¦å‘æ¡ä»¶** å½“å¸‚åœºæœ‰æ–°æˆäº¤è®¢å•æ—¶ï¼Œè§¦å‘å˜åŒ–äº¤æ˜“å¯¹ä»·æ ¼æ¨é€ã€‚

**æ•°æ®æ¥å£**

*   **æ¥å£åœ°å€(TOPIC)** `price.update`
*   **è¯·æ±‚å‚æ•°** æ— 
*   **å“åº”ç»“æœï¼š**

    ```js
    {
        "method": "price.update",
        "data": [
            //äº¤æ˜“å¯¹ idã€ä»·æ ¼ã€æ¶¨å¹…ç™¾åˆ†æ¯”ã€æˆäº¤é‡(24H)ã€é«˜(24H)ã€ä½(24H)
            [1, 0.0049, -0.0585, 4371833.4722, 0.005445, 0.004669], 
            [... ...]
        ]
    }
    ```

## æŠ€æœ¯å®ç°

1.  æŸ¥è¯¢æ¯ä¸€ä¸ªäº¤æ˜“å¯¹æœ€åä¸€ä¸ªæˆäº¤è®¢å•çš„ä»·æ ¼
2.  åœ¨åŒæ­¥åŒºå—åŠæŠ¥è¡¨æ•°æ®åï¼Œå¢é‡æ¨é€è¯¥äº¤æ˜“å¯¹çš„å®æ—¶ä»·æ ¼è‡³å‰ç«¯

* * *

é€šè¿‡æœ¬å°èŠ‚çš„å­¦ä¹ ã€æ€è€ƒä¸åŠ¨æ‰‹å®è·µï¼Œæˆ‘ä»¬å®Œæˆäº†å¯¹å¤–äº¤æ˜“å¯¹å®æ—¶å¸ä»·çš„æ¥å£æŸ¥è¯¢ä»¥åŠ socket æ•°æ®æ¨é€ã€‚

* * *

> åœ¨æ•™ç¨‹ä¸­å¦‚å‡ºç°é”™è¯¯ğŸ›æˆ–ä¸æ˜“ç†è§£çš„çŸ¥è¯†ç‚¹ï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡æŒ‡æ­£! Name: zhangliang | WeChat: rushking2009 | Mail: zhangliang@cldy.org

![Show me your code.](img/9c507c40d372f5692d061c802a44deb2.jpg "åŠ ç¾¤äº†è§£")![](img/aab6c923225b0a35b6580de17534641d.jpg)

æ³¨ï¼š æœ‰æƒ³äº†è§£**æ„¿ç å…¨æ€ç»´ IT å·¥ç¨‹å¸ˆåŠ é€Ÿå™¨**çš„æœ‹å‹ï¼Œå¯ä»¥æ‰«ç åŠ ç¾¤å’¨è¯¢ã€‚

* * *

### **changelog**

2019-03-04 zhangliang \zhangliang@cldy.org\

*   åˆæ¬¡å‘ç¨¿

2019-03-05 zhangliang

*   æ•°æ®æ¥å£å®Œå–„